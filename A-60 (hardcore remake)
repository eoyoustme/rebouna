local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

local spawner = loadstring(game:HttpGet("https://raw.githubusercontent.com/RegularVynixu/Utilities/main/Doors/Entity%20Spawner/V2/Source.lua"))()

local a60Model = nil

local entity = spawner.Create({
	Entity = {
		Name = "A-60",
		Asset = "rbxassetid://83115631769066",
		HeightOffset = 0
	},
	Lights = {
		Flicker = { Enabled = true, Duration = 1 },
		Shatter = true,
		Repair = false
	},
	Earthquake = { Enabled = true },
	CameraShake = { Enabled = true, Range = 100, Values = {1.5, 20, 0.1, 1} },
	Movement = { Speed = 400, Delay = 4, Reversed = false },
	Rebounding = { Enabled = true, Type = "Ambush", Min = 7, Max = 7, Delay = 0.3 },
	Damage = { Enabled = true, Range = 60, Amount = 15 },
	Crucifixion = { Enabled = true, Range = 40, Resist = false, Break = true },
	Death = {
		Type = "Guiding",
		Hints = {"You die to A-60", "He is strongest entity", "he speed is crazy", "and he is easy to khow he spawn"},
		Cause = ""
	},
    Jumpscare = { Enabled = false }
})

entity:SetCallback("OnSpawned", function()
    print("OnSpawned: Thực thể đã được sinh ra.")
    -- LỰA CHỌN 1: Thử lấy model từ thuộc tính 'Character' của entity (giả định phổ biến)
    a60Model = entity.Character 
    
    if not a60Model then
        -- LỰA CHỌN 2: Nếu LỰA CHỌN 1 không được, thử tìm model trong Workspace theo tên
        -- (Cần một thời gian chờ ngắn nếu model chưa kịp xuất hiện trong Workspace)
        print("OnSpawned: entity.Character không tìm thấy, chờ 0.1 giây và thử tìm trong Workspace...")
        wait(0.1) 
        a60Model = Workspace:FindFirstChild(entity.Entity.Name)
    end

    if a60Model then
        print("OnSpawned: Đã lấy được Model A-60:", a60Model.Name)
        -- In ra tất cả các Part con để kiểm tra tên "RushNew"
        print("OnSpawned: Các Part con của A-60 Model:")
        for _, child in ipairs(a60Model:GetChildren()) do
            if child:IsA("BasePart") then
                print("-", child.Name, "(Class:", child.ClassName, ")")
            end
        end

        local rushNewPart = a60Model:FindFirstChild("RushNew")
        if rushNewPart then
            print("OnSpawned: Đã tìm thấy Part 'RushNew'!")
            print("OnSpawned: Vị trí hiện tại của 'RushNew':", rushNewPart.Position)
            -- Kiểm tra xem RushNew có bị Anchored không. Nếu có, cần bỏ Anchored để di chuyển bằng CFrame.
            if rushNewPart.Anchored then
                warn("OnSpawned: 'RushNew' Part đang bị Anchored! Cần bỏ Anchored để di chuyển nó.")
                -- rushNewPart.Anchored = false -- Bạn có thể thử bỏ Anchored ở đây nếu muốn.
            end
        else
            warn("OnSpawned: Model A-60 không chứa Part tên là 'RushNew'.")
            -- Rất quan trọng: Nếu không tìm thấy RushNew, teleport sẽ không hoạt động.
            -- Bạn có thể cần kiểm tra model A-60 của mình trong Studio để xem tên của Part chính xác.
        end
    else
        warn("OnSpawned: Không thể lấy được Model A-60 sau khi sinh. Teleport sẽ không hoạt động.")
    end
end)

-- Các callback khác giữ nguyên...

entity:SetCallback("OnDamagePlayer", function(newHealth)
    if newHealth == 0 then
        print("OnDamagePlayer: Người chơi bị giết. Bắt đầu quá trình teleport...")

        local localPlayer = Players.LocalPlayer
        local rushNewPart = a60Model and a60Model:FindFirstChild("RushNew")

        print("OnDamagePlayer: localPlayer:", tostring(localPlayer))
        print("OnDamagePlayer: localPlayer.Character:", tostring(localPlayer and localPlayer.Character))
        print("OnDamagePlayer: Workspace.CurrentCamera:", tostring(Workspace.CurrentCamera))
        print("OnDamagePlayer: a60Model:", tostring(a60Model))
        print("OnDamagePlayer: rushNewPart:", tostring(rushNewPart))

        if localPlayer and localPlayer.Character and Workspace.CurrentCamera and rushNewPart then
            local camera = Workspace.CurrentCamera
            local playerHeadCFrame = localPlayer.Character:FindFirstChild("Head") and localPlayer.Character.Head.CFrame or camera.CFrame

            local targetCFrame = playerHeadCFrame + playerHeadCFrame.LookVector * 5
            targetCFrame = CFrame.new(targetCFrame.Position)

            local lookAtPlayer = CFrame.new(targetCFrame.Position, playerHeadCFrame.Position)
            targetCFrame = lookAtPlayer * CFrame.new(0,0,-5)

            print("OnDamagePlayer: Vị trí mục tiêu teleport:", targetCFrame)
            rushNewPart.CFrame = targetCFrame
            print("OnDamagePlayer: Đã cố gắng thiết lập CFrame của 'RushNew'.")

            wait(0.5)
        else
            warn("OnDamagePlayer: Không thể thực hiện teleport: Thiếu các thành phần cần thiết (kiểm tra các giá trị trên).")
        end
        print("OnDamagePlayer: Quy trình chết tiếp tục.")
    else
        print("OnDamagePlayer: Thực thể đã gây sát thương cho người chơi.")
    end
end)

entity:SetCallback("OnDespawned", function()
    print("OnDespawned: Thực thể đã biến mất.")
    a60Model = nil
end)

--... các callback khác và entity:Run()

entity:Run()
