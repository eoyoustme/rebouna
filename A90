-- üì° Ph√°t ti·∫øng r√® c·∫£nh b√°o
local static = Instance.new("Sound")
static.SoundId = "rbxassetid://92453621152905"
static.Parent = game.ReplicatedStorage
static.Name = "Se"
static.Pitch = 1
static.Volume = 10
static.TimePosition = 0.2
static:Play()

local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")

-- üñºÔ∏è Giao di·ªán c·∫£nh b√°o
local GUI = Instance.new("ScreenGui")
GUI.Name = "WarningGui"
GUI.IgnoreGuiInset = true
GUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
GUI.Parent = player:WaitForChild("PlayerGui")

local image = Instance.new("ImageLabel")
image.BackgroundTransparency = 1
image.Size = UDim2.new(0, 150, 0, 150)
image.Image = "rbxassetid://13254725678" -- ·∫¢nh c·∫£nh b√°o "STOP"
image.Parent = GUI

-- üé≤ Hi·ªÉn th·ªã ·∫£nh t·∫°i v·ªã tr√≠ ng·∫´u nhi√™n trong viewport
local viewportSize = workspace.CurrentCamera.ViewportSize
local randomX = math.random(0, viewportSize.X - image.Size.X.Offset) -- ƒêi·ªÅu ch·ªânh cho k√≠ch th∆∞·ªõc ·∫£nh
local randomY = math.random(0, viewportSize.Y - image.Size.Y.Offset) -- ƒêi·ªÅu ch·ªânh cho k√≠ch th∆∞·ªõc ·∫£nh
image.Position = UDim2.new(0, randomX, 0, randomY)

-- üïí Sau 2 gi√¢y, chuy·ªÉn ·∫£nh v√†o gi·ªØa m√†n h√¨nh
task.delay(1, function()
	image:TweenPosition(UDim2.new(0.5, -150, 0.5, -150), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.5, true)

	-- ‚è≥ Th·ªùi gian ƒë·ª©ng y√™n y√™u c·∫ßu
	local standStillTime = 2.652
	local moveDetected = false

	-- üïµÔ∏è‚Äç‚ôÇÔ∏è Theo d√µi chuy·ªÉn ƒë·ªông SAU KHI ·∫£nh ƒë√£ v√†o gi·ªØa
	for i = 1, standStillTime * 10 do
		task.wait(0.1)
		if humanoid.MoveDirection.Magnitude > 0 then
			moveDetected = true
			break
		end
	end

	-- üíÄ N·∫øu ng∆∞·ªùi ch∆°i di chuy·ªÉn ‚Üí jumpscare
	if moveDetected then
		GUI:Destroy()

		-- üéÉ Jumpscare GUI
		local jumpscareGUI = Instance.new("ScreenGui")
		jumpscareGUI.Name = "JumpscareGui"
		jumpscareGUI.IgnoreGuiInset = true
		jumpscareGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
		jumpscareGUI.Parent = player:WaitForChild("PlayerGui")

		local face = Instance.new("ImageLabel")
		face.BackgroundTransparency = 1
		face.Size = UDim2.new(1, 0, 1, 0)
		face.Image = "rbxassetid://12436809127" -- M·∫∑t n·∫° jumpscare
		face.ImageTransparency = 0
		face.Parent = jumpscareGUI

		-- üì¢ √Çm thanh scream
		local jumpSound = Instance.new("Sound")
		jumpSound.SoundId = "rbxassetid://124085357123084"
		jumpSound.Volume = 10
		jumpSound.Parent = jumpscareGUI
		jumpSound:Play()

		-- ü©∏ G√¢y s√°t th∆∞∆°ng sau 2 gi√¢y
		task.wait(0.7)
		humanoid:TakeDamage(40)

		-- üìú Death message
		local stats = game.ReplicatedStorage:FindFirstChild("GameStats")
		if stats then
			local deathCause = stats:FindFirstChild("Player_" .. player.Name)
			if deathCause then
				deathCause.Total.DeathCause.Value = "Paralysis"
			end
		end

		pcall(function()
			firesignal(game.ReplicatedStorage.RemotesFolder.DeathHint.OnClientEvent,
				{
					"You died to who you call Paralysis.",
					"Try your best to not move at all.",
					"He can sense you with sound."
				},
				"Yellow"
			)
		end)

		-- üßπ Xo√° GUI sau khi ch·∫øt ho·∫∑c sau 3 gi√¢y n·∫øu ch∆∞a ch·∫øt
		local function cleanUp()
			if jumpscareGUI and jumpscareGUI.Parent then
				jumpscareGUI:Destroy()
			end
		end

		humanoid.Died:Connect(function()
			task.wait(1)
			cleanUp()
		end)

		task.delay(1, cleanUp)

	else
		-- ‚úÖ Ng∆∞·ªùi ch∆°i kh√¥ng di chuy·ªÉn ‚Üí Xo√° GUI c·∫£nh b√°o
		task.wait(1)
		if GUI then GUI:Destroy() end
	end
end)
