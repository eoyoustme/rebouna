local cue2 = Instance.new("Sound")
cue2.Parent = workspace
cue2.Name = "Spawn"
cue2.SoundId = "rbxassetid://933230732"
cue2.Volume = 45
cue2.PlaybackSpeed = 1
cue2:Play()

wait(1)

-- Kiểm tra phòng hiện tại
local entityModel = true
local latestRoom = game.ReplicatedStorage.GameData.LatestRoom.Value

-- Nếu trong phòng Seek, Figure hoặc phòng 90+
if workspace:FindFirstChild("SeekMovingNewClone") or
    latestRoom == 50 or latestRoom == 100 or
    (latestRoom >= 90 and latestRoom <= 100) then
    entityModel = false
end

local Kill = true

-- Tạo entity từ model ID (bạn thay ID này theo model bạn muốn)
local entity = game:GetObjects("rbxassetid://122309151397392")[1]
entity.Parent = workspace

-- Tìm part chính của entity để đặt vị trí và dùng cho logic
local part = entity:FindFirstChildWhichIsA("BasePart") or entity:FindFirstChildWhichIsA("Part")

-- Đặt vị trí entity (ví dụ: phòng hiện tại, vị trí sàn + 4)
local currentRooms = workspace:FindFirstChild("CurrentRooms")
if currentRooms then
    local rooms = currentRooms:GetChildren()
    if #rooms > 1 then
        part.CFrame = rooms[#rooms - 1].Parts.Floor.CFrame + Vector3.new(0, 4, 0)
    else
        part.CFrame = workspace.CurrentCamera.CFrame * CFrame.new(0, 0, SPAWN_DISTANCE_BEHIND_PLAYER)
    end
else
    part.CFrame = workspace.CurrentCamera.CFrame * CFrame.new(0, 0, SPAWN_DISTANCE_BEHIND_PLAYER)
end

wait(0.01)

task.spawn(function()
    local player = game.Players.LocalPlayer
    local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")

    -- Tạo âm thanh khi mất máu
    local damageSound = Instance.new("Sound")
    damageSound.SoundId = "rbxassetid://6664373487"
    damageSound.Volume = 20
    damageSound.Parent = player.Character

    -- Ảnh jumpscare full màn hình
    local JUMPSCARE_IMAGE_ID = "rbxassetid://11306695974" -- Thay ID của bạn
    local JUMPSCARE_DURATION = 1

-- Jumpscare image properties
local JUMPSCARE_IMAGE_ID = "rbxassetid://11306695974" -- ID ảnh jumpscare
local JUMPSCARE_DURATION = 1 -- Thời gian ảnh hiện (giây)

-- Create Jumpscare GUI
local jumpscareGui = Instance.new("ScreenGui")
jumpscareGui.Name = "JumpscareGUI"
jumpscareGui.Parent = player:WaitForChild("PlayerGui")

local jumpscareImage = Instance.new("ImageLabel")
jumpscareImage.Name = "JumpscareImage"
jumpscareImage.Image = JUMPSCARE_IMAGE_ID
jumpscareImage.BackgroundTransparency = 1
jumpscareImage.Size = UDim2.new(1, 0, 1, 0) -- full màn hình
jumpscareImage.Position = UDim2.new(0, 0, 0, 0)
jumpscareImage.ZIndex = 10
jumpscareImage.Visible = false
jumpscareImage.ScaleType = Enum.ScaleType.Stretch -- **Quan trọng để ảnh phủ full**
jumpscareImage.AnchorPoint = Vector2.new(0, 0)
jumpscareImage.Parent = jumpscareGui

    while Kill do
        task.wait(0.1)

        local _, onScreen = workspace.CurrentCamera:WorldToViewportPoint(part.Position)

        if not onScreen then
            if humanoid then
                humanoid:TakeDamage(5)
                damageSound:Play()

                jumpscareImage.Visible = true
                task.spawn(function()
                    task.wait(JUMPSCARE_DURATION)
                    jumpscareImage.Visible = false
                end)

                -- Freeze player camera & movement (như bạn đã làm)
                local originalCameraMode = player.CameraMode
                local originalDevEnableMouseLock = player.DevEnableMouseLock
                local originalWalkSpeed = humanoid.WalkSpeed
                local originalJumpPower = humanoid.JumpPower

                player.CameraMode = Enum.CameraMode.LockFirstPerson
                player.DevEnableMouseLock = false
                humanoid.WalkSpeed = 0
                humanoid.JumpPower = 0
                humanoid.PlatformStand = true

                task.wait(0.01)

                player.CameraMode = originalCameraMode
                player.DevEnableMouseLock = originalDevEnableMouseLock
                humanoid.WalkSpeed = originalWalkSpeed
                humanoid.JumpPower = originalJumpPower
                humanoid.PlatformStand = false
            end
        end

        if humanoid and humanoid.Health <= 0 then
            firesignal(game.ReplicatedStorage.RemotesFolder.DeathHint.OnClientEvent, {"You died to who you call owner...", "He spawns in center of room and he will damage you if you dont look at him", "He doesnt like to be ignoring"}, "Blue")
            wait(0.01)
            game:GetService("ReplicatedStorage").GameStats["Player_" .. player.Name].Total.DeathCause.Value = "HUGERRORED"
        end
    end
end)

part.Touched:Connect(function(hit)
    local character = hit.Parent
    local touchedPlayer = game.Players:GetPlayerFromCharacter(character)

    if touchedPlayer == game.Players.LocalPlayer then
        local crashSound = Instance.new("Sound")
        crashSound.SoundId = "rbxassetid://7027640335"
        crashSound.Volume = 50
        crashSound.Parent = workspace
        crashSound.Looped = true

        print("Player touched entity! Playing continuous crash sound and freezing client...")

        crashSound:Play()

        while true do
            -- Vòng lặp vô hạn làm freeze client
        end
    end
end)

game.ReplicatedStorage.GameData.LatestRoom.Changed:Wait()
Kill = false
entity:Destroy()
